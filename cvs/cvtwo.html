<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional CV Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
        }
        .section-bg {
            background-color: #f8fafc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #3b82f6;
        }

        
.footer-ink {
        background: #f8fafb;
      }

      .social-icon {
        width: 26px;
        height: 26px;
        fill: currentColor;
      }


        .form-input {
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 10px 12px;
            width: 100%;
            transition: all 0.3s;
        }
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-primary:hover {
            background-color: #2563eb;
            transform: translateY(-2px);
        }
        .btn-secondary {
            background-color: #10b981;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-secondary:hover {
            background-color: #059669;
            transform: translateY(-2px);
        }
        .cv-template {
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        .cv-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
            color: white;
            padding: 30px;
        }
        .section-title {
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 8px;
            margin-bottom: 15px;
            color: #1e3a8a;
            font-weight: 700;
        }
        .skill-bar {
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            margin-top: 5px;
            overflow: hidden;
        }
        .skill-level {
            height: 100%;
            background-color: #3b82f6;
            border-radius: 4px;
        }
        .language-level {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #e5e7eb;
            margin-right: 5px;
        }
        .language-level.filled {
            background-color: #3b82f6;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }
        .modal-content {
            background: white;
            border-radius: 12px;
            max-width: 800px;
            margin: 40px auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #e5e7eb;
        }
        .modal-body {
            padding: 20px;
        }
        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #6b7280;
        }
        .add-btn {
            background-color: #10b981;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }
        .remove-btn {
            background-color: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 5px 10px;
            cursor: pointer;
            margin-top: 10px;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-white shadow-sm py-4">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center">
                <div class="bg-blue-600 text-white p-2 rounded-lg mr-3">
                    <i class="fas fa-file-alt text-xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Professional CV Builder</h1>
            </div>
            <div class="flex items-center space-x-4">
                <button class="btn-primary flex items-center gap-2">
                    <i class="fas fa-download"></i>
                    Download CV
                </button>
                <button class="bg-gray-200 text-gray-800 py-2 px-4 rounded-lg flex items-center gap-2">
                    <i class="fas fa-user"></i>
                    My Account
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Form Section -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Personal Information</h2>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-gray-700 mb-2">Full Name</label>
                            <input type="text" id="fullName" class="form-input" placeholder="Enter your full name">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Job Title</label>
                            <input type="text" id="jobTitle" class="form-input" placeholder="Current job title">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Email Address</label>
                            <input type="email" id="email" class="form-input" placeholder="example@email.com">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Phone Number</label>
                            <input type="tel" id="phone" class="form-input" placeholder="+1 (555) 123-4567">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Address</label>
                            <input type="text" id="address" class="form-input" placeholder="City, Country">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Website (Optional)</label>
                            <input type="url" id="website" class="form-input" placeholder="www.example.com">
                        </div>
                    </div>
                </div>

                <!-- Professional Summary -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">Professional Summary</h2>
                    <div>
                        <label class="block text-gray-700 mb-2">About You</label>
                        <textarea id="summary" class="form-input" rows="4" placeholder="Write a brief summary about your experience and skills"></textarea>
                    </div>
                </div>

                <!-- Experience -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Work Experience</h2>
                        <button id="addExperience" class="add-btn">
                            <i class="fas fa-plus"></i> Add Experience
                        </button>
                    </div>
                    <div id="experiencesContainer">
                        <!-- Experience items will be added here -->
                    </div>
                </div>

                <!-- Education -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Education</h2>
                        <button id="addEducation" class="add-btn">
                            <i class="fas fa-plus"></i> Add Education
                        </button>
                    </div>
                    <div id="educationContainer">
                        <!-- Education items will be added here -->
                    </div>
                </div>

                <!-- Skills -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Skills</h2>
                        <button id="addSkill" class="add-btn">
                            <i class="fas fa-plus"></i> Add Skill
                        </button>
                    </div>
                    <div id="skillsContainer">
                        <!-- Skills will be added here -->
                    </div>
                </div>

                <!-- Languages -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">Languages</h2>
                        <button id="addLanguage" class="add-btn">
                            <i class="fas fa-plus"></i> Add Language
                        </button>
                    </div>
                    <div id="languagesContainer">
                        <!-- Languages will be added here -->
                    </div>
                </div>
            </div>

            <!-- Preview Section -->
            <div class="lg:col-span-1">
                <div class="sticky top-8">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">CV Preview</h2>
                        <p class="text-gray-600 mb-6">Preview your CV before downloading</p>
                        <button id="previewBtn" class="btn-secondary w-full flex items-center justify-center gap-2">
                            <i class="fas fa-eye"></i>
                            Preview CV
                        </button>
                    </div>

                    <!-- CV Template Preview -->
                    <div id="cvPreview" class="cv-template">
                        <div class="cv-header">
                            <h1 id="previewName" class="text-3xl font-bold">John Smith</h1>
                            <p id="previewTitle" class="text-xl opacity-90 mt-2">Web Developer</p>
                            <div class="flex flex-wrap gap-4 mt-4">
                                <div class="flex items-center">
                                    <i class="fas fa-envelope mr-2"></i>
                                    <span id="previewEmail">john.smith@email.com</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-phone mr-2"></i>
                                    <span id="previewPhone">+1 (555) 123-4567</span>
                                </div>
                                <div class="flex items-center">
                                    <i class="fas fa-map-marker-alt mr-2"></i>
                                    <span id="previewAddress">New York, USA</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="mb-6">
                                <h2 class="section-title">Professional Summary</h2>
                                <p id="previewSummary" class="text-gray-700">Web developer with over 5 years of experience in designing and developing web applications using the latest technologies. Specialized in UI/UX development using React and Vue.js.</p>
                            </div>
                            <div class="mb-6">
                                <h2 class="section-title">Work Experience</h2>
                                <div id="previewExperiences">
                                    <div class="mb-4">
                                        <h3 class="font-bold text-gray-800">Senior Web Developer</h3>
                                        <p class="text-gray-600">Tech Solutions Inc. | 2020 - Present</p>
                                        <p class="text-gray-700 mt-2">Developed and managed web applications using React and Node.js, improving application performance and user interfaces.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-6">
                                <h2 class="section-title">Education</h2>
                                <div id="previewEducation">
                                    <div class="mb-4">
                                        <h3 class="font-bold text-gray-800">Bachelor of Computer Science</h3>
                                        <p class="text-gray-600">University of Technology | 2015 - 2019</p>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-6">
                                <h2 class="section-title">Skills</h2>
                                <div id="previewSkills" class="flex flex-wrap gap-2">
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">JavaScript</span>
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">React</span>
                                    <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">Node.js</span>
                                </div>
                            </div>
                            <div>
                                <h2 class="section-title">Languages</h2>
                                <div id="previewLanguages" class="flex flex-wrap gap-4">
                                    <div>
                                        <span class="font-medium">English</span>
                                        <div class="flex mt-1">
                                            <span class="language-level filled"></span>
                                            <span class="language-level filled"></span>
                                            <span class="language-level filled"></span>
                                            <span class="language-level filled"></span>
                                            <span class="language-level filled"></span>
                                        </div>
                                    </div>
                                    <div>
                                        <span class="font-medium">Spanish</span>
                                        <div class="flex mt-1">
                                            <span class="language-level filled"></span>
                                            <span class="language-level filled"></span>
                                            <span class="language-level filled"></span>
                                            <span class="language-level"></span>
                                            <span class="language-level"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Preview Modal -->
    <div id="previewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="text-2xl font-bold text-gray-800">CV Preview</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modalPreviewContent" class="cv-template">
                    <!-- Preview content will be inserted here -->
                </div>
                <div class="flex justify-center gap-4 mt-6">
                    <button id="downloadPdf" class="btn-primary flex items-center gap-2">
                        <i class="fas fa-file-pdf"></i>
                        Download PDF
                    </button>
                    <button id="downloadImage" class="btn-secondary flex items-center gap-2">
                        <i class="fas fa-file-image"></i>
                        Download Image
                    </button>
                    <button class="close-modal bg-gray-500 text-white px-6 py-3 rounded-lg font-bold">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>


<!-- FOOTER -->
    <footer class="mt-12 footer-ink border-t border-gray-100">
      <div
        class="max-w-6xl mx-auto px-6 py-8 flex flex-col md:flex-row md:items-center md:justify-between gap-6"
      >
        <!-- RIGHT COLUMN -->
        <div class="text-right md:flex-1">
          <img
            src="../assets/imgs/gsoor_logo.jpg"
            alt="logo"
            class="h-10 mx-auto md:mx-0"
          />
          <div
            class="flex justify-center md:justify-end gap-4 mt-3 text-gray-600"
          >
            <i class="fa-brands fa-youtube social-icon text-lg"></i>
            <i class="fa-brands fa-tiktok social-icon text-lg"></i>
            <i class="fa-brands fa-instagram social-icon text-lg"></i>
          </div>
        </div>

        <!-- CENTER COLUMN -->
        <div class="text-center md:flex-1">
          <h3 class="font-bold mb-2">تواصل معنا</h3>
          <div class="flex items-center justify-center gap-4 text-gray-600">
            <div class="flex items-center gap-2">
              <i class="fa-regular fa-envelope text-sm"></i>
              <span>البريد</span>
            </div>
            <div class="flex items-center gap-2">
              <i class="fa-solid fa-mobile-screen-button text-sm"></i>
              <span>واتس</span>
            </div>
          </div>
          <div class="mt-3 text-sm text-gray-500">موقّع لدى منصة الأعمال</div>
        </div>

        <!-- LEFT COLUMN -->
        <div class="text-left md:flex-1">
          <div class="text-sm text-gray-500">
            © 2025 متجر جسور الرقمي | جميع الحقوق محفوظة
          </div>
          <div
            class="mt-3 flex gap-2 items-center justify-center md:justify-start"
          >
            <span class="sr-only">Visa</span>
            <i class="fa-brands fa-cc-visa text-gray-600 text-lg"></i>
            <span class="sr-only">Mada</span>
            <i class="fa-solid fa-credit-card text-gray-600 text-lg"></i>
          </div>
        </div>
      </div>
    </footer>
    <script>
        // Initialize with sample data
        document.addEventListener('DOMContentLoaded', function() {
            // Add initial experience
            addExperience('Senior Web Developer', 'Tech Solutions Inc.', '2020', 'Present', 'Developed and managed web applications using React and Node.js, improving application performance and user interfaces.');
            
            // Add initial education
            addEducation('Bachelor of Computer Science', 'University of Technology', '2015', '2019');
            
            // Add initial skills
            addSkill('JavaScript', 90);
            addSkill('React', 85);
            addSkill('Node.js', 80);
            
            // Add initial languages
            addLanguage('English', 5);
            addLanguage('Spanish', 3);
            
            // Update preview with initial data
            updatePreview();
        });

        // Experience functionality
        document.getElementById('addExperience').addEventListener('click', function() {
            addExperience();
        });

        function addExperience(title = '', company = '', startYear = '', endYear = '', description = '') {
            const container = document.getElementById('experiencesContainer');
            const experienceId = 'experience-' + Date.now();
            
            const experienceHTML = `
                <div class="section-bg mb-4" id="${experienceId}">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Job Title</label>
                            <input type="text" class="form-input experience-title" value="${title}" placeholder="Job Title">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Company Name</label>
                            <input type="text" class="form-input experience-company" value="${company}" placeholder="Company Name">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Start Year</label>
                            <input type="text" class="form-input experience-start" value="${startYear}" placeholder="Start Year">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">End Year</label>
                            <input type="text" class="form-input experience-end" value="${endYear}" placeholder="End Year">
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="block text-gray-700 mb-2">Description</label>
                        <textarea class="form-input experience-description" rows="3" placeholder="Describe your responsibilities and achievements">${description}</textarea>
                    </div>
                    <button class="remove-btn remove-experience" data-id="${experienceId}">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', experienceHTML);
            
            // Add event listener to the remove button
            document.querySelector(`#${experienceId} .remove-experience`).addEventListener('click', function() {
                document.getElementById(experienceId).remove();
                updatePreview();
            });
            
            // Add input event listeners to update preview
            const inputs = document.querySelectorAll(`#${experienceId} input, #${experienceId} textarea`);
            inputs.forEach(input => {
                input.addEventListener('input', updatePreview);
            });
        }

        // Education functionality
        document.getElementById('addEducation').addEventListener('click', function() {
            addEducation();
        });

        function addEducation(degree = '', institution = '', startYear = '', endYear = '') {
            const container = document.getElementById('educationContainer');
            const educationId = 'education-' + Date.now();
            
            const educationHTML = `
                <div class="section-bg mb-4" id="${educationId}">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Degree</label>
                            <input type="text" class="form-input education-degree" value="${degree}" placeholder="Academic Degree">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Institution</label>
                            <input type="text" class="form-input education-institution" value="${institution}" placeholder="Educational Institution">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Start Year</label>
                            <input type="text" class="form-input education-start" value="${startYear}" placeholder="Start Year">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Graduation Year</label>
                            <input type="text" class="form-input education-end" value="${endYear}" placeholder="Graduation Year">
                        </div>
                    </div>
                    <button class="remove-btn remove-education" data-id="${educationId}">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', educationHTML);
            
            // Add event listener to the remove button
            document.querySelector(`#${educationId} .remove-education`).addEventListener('click', function() {
                document.getElementById(educationId).remove();
                updatePreview();
            });
            
            // Add input event listeners to update preview
            const inputs = document.querySelectorAll(`#${educationId} input`);
            inputs.forEach(input => {
                input.addEventListener('input', updatePreview);
            });
        }

        // Skills functionality
        document.getElementById('addSkill').addEventListener('click', function() {
            addSkill();
        });

        function addSkill(name = '', level = 50) {
            const container = document.getElementById('skillsContainer');
            const skillId = 'skill-' + Date.now();
            
            const skillHTML = `
                <div class="section-bg mb-4" id="${skillId}">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Skill Name</label>
                            <input type="text" class="form-input skill-name" value="${name}" placeholder="Skill Name">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Level (%)</label>
                            <input type="range" class="form-input skill-level" min="0" max="100" value="${level}">
                            <span class="skill-level-value text-sm text-gray-600">${level}%</span>
                        </div>
                    </div>
                    <button class="remove-btn remove-skill" data-id="${skillId}">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', skillHTML);
            
            // Update the level value display when slider changes
            const levelInput = document.querySelector(`#${skillId} .skill-level`);
            const levelValue = document.querySelector(`#${skillId} .skill-level-value`);
            
            levelInput.addEventListener('input', function() {
                levelValue.textContent = this.value + '%';
                updatePreview();
            });
            
            // Add event listener to the remove button
            document.querySelector(`#${skillId} .remove-skill`).addEventListener('click', function() {
                document.getElementById(skillId).remove();
                updatePreview();
            });
            
            // Add input event listeners to update preview
            const nameInput = document.querySelector(`#${skillId} .skill-name`);
            nameInput.addEventListener('input', updatePreview);
        }

        // Languages functionality
        document.getElementById('addLanguage').addEventListener('click', function() {
            addLanguage();
        });

        function addLanguage(name = '', level = 3) {
            const container = document.getElementById('languagesContainer');
            const languageId = 'language-' + Date.now();
            
            const languageHTML = `
                <div class="section-bg mb-4" id="${languageId}">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-gray-700 mb-2">Language</label>
                            <input type="text" class="form-input language-name" value="${name}" placeholder="Language Name">
                        </div>
                        <div>
                            <label class="block text-gray-700 mb-2">Level (1-5)</label>
                            <input type="range" class="form-input language-level" min="1" max="5" value="${level}">
                            <span class="language-level-value text-sm text-gray-600">${level}/5</span>
                        </div>
                    </div>
                    <button class="remove-btn remove-language" data-id="${languageId}">
                        <i class="fas fa-trash"></i> Remove
                    </button>
                </div>
            `;
            
            container.insertAdjacentHTML('beforeend', languageHTML);
            
            // Update the level value display when slider changes
            const levelInput = document.querySelector(`#${languageId} .language-level`);
            const levelValue = document.querySelector(`#${languageId} .language-level-value`);
            
            levelInput.addEventListener('input', function() {
                levelValue.textContent = this.value + '/5';
                updatePreview();
            });
            
            // Add event listener to the remove button
            document.querySelector(`#${languageId} .remove-language`).addEventListener('click', function() {
                document.getElementById(languageId).remove();
                updatePreview();
            });
            
            // Add input event listeners to update preview
            const nameInput = document.querySelector(`#${languageId} .language-name`);
            nameInput.addEventListener('input', updatePreview);
        }

        // Update preview function
        function updatePreview() {
            // Personal info
            document.getElementById('previewName').textContent = document.getElementById('fullName').value || 'John Smith';
            document.getElementById('previewTitle').textContent = document.getElementById('jobTitle').value || 'Web Developer';
            document.getElementById('previewEmail').textContent = document.getElementById('email').value || 'john.smith@email.com';
            document.getElementById('previewPhone').textContent = document.getElementById('phone').value || '+1 (555) 123-4567';
            document.getElementById('previewAddress').textContent = document.getElementById('address').value || 'New York, USA';
            document.getElementById('previewSummary').textContent = document.getElementById('summary').value || 'Web developer with over 5 years of experience in designing and developing web applications using the latest technologies. Specialized in UI/UX development using React and Vue.js.';
            
            // Experiences
            const previewExperiences = document.getElementById('previewExperiences');
            previewExperiences.innerHTML = '';
            
            const experienceElements = document.querySelectorAll('#experiencesContainer > div');
            experienceElements.forEach(exp => {
                const title = exp.querySelector('.experience-title').value;
                const company = exp.querySelector('.experience-company').value;
                const start = exp.querySelector('.experience-start').value;
                const end = exp.querySelector('.experience-end').value;
                const description = exp.querySelector('.experience-description').value;
                
                if (title || company) {
                    const expHTML = `
                        <div class="mb-4">
                            <h3 class="font-bold text-gray-800">${title}</h3>
                            <p class="text-gray-600">${company} ${start ? '| ' + start : ''} ${end ? '- ' + end : ''}</p>
                            ${description ? `<p class="text-gray-700 mt-2">${description}</p>` : ''}
                        </div>
                    `;
                    previewExperiences.insertAdjacentHTML('beforeend', expHTML);
                }
            });
            
            // Education
            const previewEducation = document.getElementById('previewEducation');
            previewEducation.innerHTML = '';
            
            const educationElements = document.querySelectorAll('#educationContainer > div');
            educationElements.forEach(edu => {
                const degree = edu.querySelector('.education-degree').value;
                const institution = edu.querySelector('.education-institution').value;
                const start = edu.querySelector('.education-start').value;
                const end = edu.querySelector('.education-end').value;
                
                if (degree || institution) {
                    const eduHTML = `
                        <div class="mb-4">
                            <h3 class="font-bold text-gray-800">${degree}</h3>
                            <p class="text-gray-600">${institution} ${start ? '| ' + start : ''} ${end ? '- ' + end : ''}</p>
                        </div>
                    `;
                    previewEducation.insertAdjacentHTML('beforeend', eduHTML);
                }
            });
            
            // Skills
            const previewSkills = document.getElementById('previewSkills');
            previewSkills.innerHTML = '';
            
            const skillElements = document.querySelectorAll('#skillsContainer > div');
            skillElements.forEach(skill => {
                const name = skill.querySelector('.skill-name').value;
                if (name) {
                    const skillHTML = `<span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full">${name}</span>`;
                    previewSkills.insertAdjacentHTML('beforeend', skillHTML);
                }
            });
            
            // Languages
            const previewLanguages = document.getElementById('previewLanguages');
            previewLanguages.innerHTML = '';
            
            const languageElements = document.querySelectorAll('#languagesContainer > div');
            languageElements.forEach(lang => {
                const name = lang.querySelector('.language-name').value;
                const level = parseInt(lang.querySelector('.language-level').value);
                
                if (name) {
                    let dotsHTML = '';
                    for (let i = 1; i <= 5; i++) {
                        dotsHTML += `<span class="language-level ${i <= level ? 'filled' : ''}"></span>`;
                    }
                    
                    const langHTML = `
                        <div>
                            <span class="font-medium">${name}</span>
                            <div class="flex mt-1">
                                ${dotsHTML}
                            </div>
                        </div>
                    `;
                    previewLanguages.insertAdjacentHTML('beforeend', langHTML);
                }
            });
        }

        // Add event listeners to personal info fields
        const personalInfoFields = ['fullName', 'jobTitle', 'email', 'phone', 'address', 'summary'];
        personalInfoFields.forEach(field => {
            document.getElementById(field).addEventListener('input', updatePreview);
        });

        // Modal functionality
        document.getElementById('previewBtn').addEventListener('click', function() {
            document.getElementById('modalPreviewContent').innerHTML = document.getElementById('cvPreview').innerHTML;
            document.getElementById('previewModal').style.display = 'block';
        });

        document.querySelectorAll('.close-modal').forEach(button => {
            button.addEventListener('click', function() {
                document.getElementById('previewModal').style.display = 'none';
            });
        });

        // Download functionality
        document.getElementById('downloadPdf').addEventListener('click', function() {
            const element = document.getElementById('modalPreviewContent');
            html2canvas(element, {
                scale: 2,
                useCORS: true,
                logging: false
            }).then(canvas => {
                const imgData = canvas.toDataURL('image/jpeg', 1.0);
                const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                const imgWidth = 210;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                pdf.addImage(imgData, 'JPEG', 0, 0, imgWidth, imgHeight);
                pdf.save('Professional_CV.pdf');
            });
        });

        document.getElementById('downloadImage').addEventListener('click', function() {
            const element = document.getElementById('modalPreviewContent');
            html2canvas(element, {
                scale: 2,
                useCORS: true,
                logging: false
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'Professional_CV.png';
                link.href = canvas.toDataURL();
                link.click();
            });
        });
    </script>
</body>
</html>
