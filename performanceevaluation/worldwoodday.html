<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <title>مبادرة الأمن السيبراني والمواطنة الرقمية | نماذج تعليمية</title>

    <style>
      body {
        font-family: "Helvetica", "Tajawal", sans-serif;
      }
      
.footer-ink {
        background: #f8fafb;
      }

      .social-icon {
        width: 26px;
        height: 26px;
        fill: currentColor;
      }


      label {
        font-weight: 600;
        color: #136f3c;
        display: block;
        margin-bottom: 8px;
      }
      input[type="text"],
      input[type="date"],
      select,
      textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background-color: #ffffff;
        font-size: 14px;
      }
      /* تحسين textarea */
      textarea {
        min-height: 80px;
        line-height: 1.8;
        font-size: 14px;
        padding: 12px;
        resize: vertical;
      }
      input[type="file"] {
        width: 100%;
        padding: 8px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background-color: #ffffff;
      }
      /* Toggle Switch Styles */
      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 26px;
      }
      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 26px;
      }
      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }
      .toggle-switch input:checked + .toggle-slider {
        background-color: #10b981;
      }
      .toggle-switch input:checked + .toggle-slider:before {
        transform: translateX(24px);
      }
      /* Section Background */
      .section-bg {
        background-color: #f3f4f6;
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 16px;
      }
      /* Modal Styles */
      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        overflow-y: auto;
        padding: 20px;
      }
      .modal-overlay.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: white;
        border-radius: 16px;
        max-width: 90%;
        width: 100%;
        max-width: 1200px;
        position: relative;
        margin: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
      }
      .modal-body {
        padding: 20px;
        max-height: calc(100vh - 200px);
        overflow-y: auto;
      }
      .modal-close {
        background: none;
        border: none;
        font-size: 28px;
        cursor: pointer;
        color: #6b7280;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s;
      }
      .modal-close:hover {
        background-color: #f3f4f6;
        color: #111827;
      }
      .preview-template {
        background: white;
        padding: 40px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
      }
      /* Error Message Styles */
      .error-message {
        color: #dc2626;
        font-size: 14px;
        margin-top: 4px;
        display: none;
      }
      .error-message.show {
        display: block;
      }
      .field-error {
        border-color: #dc2626 !important;
        border-width: 2px !important;
      }
      .field-error:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
      }
      /* Radio Button Styles */
      .radio-group {
        display: flex;
        gap: 16px;
        margin-top: 8px;
      }
      .radio-option {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .radio-option input[type="radio"] {
        width: 18px;
        height: 18px;
      }
      /* File Upload Styles */
      .file-upload {
        position: relative;
        overflow: hidden;
        display: inline-block;
        width: 100%;
      }
      .file-upload-btn {
        border: 1px solid #d1d5db;
        border-radius: 6px;
        padding: 8px 16px;
        background-color: #f9fafb;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .file-upload input[type="file"] {
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        cursor: pointer;
        width: 100%;
        height: 100%;
      }
      /* Numbered List Styles */
      .numbered-list {
        list-style-type: arabic-indic;
        padding-right: 20px;
      }
      .numbered-list li {
        margin-bottom: 8px;
      }
    </style>
  </head>

  <body class="bg-gray-100 py-10">
    <div class="max-w-6xl mx-auto">
      <div
        class="max-w-4xl mx-auto border-4 rounded-2xl shadow-xl overflow-hidden mb-8 p-4"
        id="template"
      >
        <div class="bg-white rounded-xl p-6">
          <div
            class="w-[300px] h-[300px] flex mx-auto rounded-full overflow-hidden items-center justify-center shadow-md mb-8"
          >
            <img
              src="https://via.placeholder.com/300x300?text=شعار+المبادرة"
              alt="شعار المبادرة"
            />
          </div>
          <h1 class="text-5xl text-center">
مبادرة اليوم العالمي للعصا البيضاء          </h1>
          <p class="text-gray-700 my-4 text-center text-xl">
إنشاء وتخصيص مبادرة اليوم العالمي للعصا البيضاء مع إمكانية تحرير وإضافة جميع البيانات الخاصة بك، بطريقة سهلة واحترافية توفر عليه الوقت والجهد ويتم حفظ الملف النهائي بتنسيق صورة أو ملف pdf لسهولة الطباعة بجودة عالية وإعادة الاستخدام في تقارير ونماذج أخرى.          </p>
          <div class="p-6 space-y-6">
            <!-- عنوان التقرير -->
            <div>
              <label class="mb-2">عنوان التقرير:</label>
              <input
                type="text"
                id="reportTitle"
                placeholder="مبادرة الأمن السيبراني والمواطنة الرقمية"
                class="w-full"
              />
              <div id="reportTitleError" class="error-message">هذا الحقل مطلوب</div>
            </div>

            <!-- معلومات الهيدر -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">معلومات الهيدر</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="mb-2">البلد:</label>
                  <input
                    type="text"
                    id="country"
                    placeholder="المملكة العربية السعودية"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">الوزارة:</label>
                  <input
                    type="text"
                    id="ministry"
                    placeholder="وزارة التعليم"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">الإدارة:</label>
                  <input
                    type="text"
                    id="administration"
                    placeholder="الإدارة العامة للتعليم بالمنطقة الشرقية"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">المدرسة:</label>
                  <input
                    type="text"
                    id="school"
                    placeholder="مدرسة"
                    class="w-full"
                  />
                </div>
              </div>
            </div>

            <!-- معلومات إضافية -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">معلومات إضافية</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="mb-2">العام الدراسي:</label>
                  <input
                    type="text"
                    id="academicYear"
                    placeholder="١٤٤٧هـ"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">الفصل الدراسي:</label>
                  <input
                    type="text"
                    id="semester"
                    placeholder="الفصل الدراسي الأول"
                    class="w-full"
                  />
                </div>
              </div>
            </div>

            <!-- المعلومات الأساسية -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">المعلومات الأساسية:</h3>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <label class="mb-2">اسم الاستراتيجية:</label>
                  <input
                    type="text"
                    id="strategyName"
                    placeholder="التعلم المبني على المشاريع"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">عدد المستهدفين:</label>
                  <input
                    type="text"
                    id="targetCount"
                    placeholder="٣٠٠"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">تاريخ التنفيذ:</label>
                  <input
                    type="text"
                    id="executionDate"
                    placeholder="٢٩ ربيع الآخر ١٤٤٧ هـ"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">شعار المبادرة:</label>
                  <input
                    type="text"
                    id="initiativeLogo"
                    placeholder="مستقبلنا الرقمي آمن"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">مكان المبادرة:</label>
                  <input
                    type="text"
                    id="initiativeLocation"
                    placeholder="معمل الحاسب والفصول الدراسية"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">الفئة المستهدفة:</label>
                  <input
                    type="text"
                    id="targetGroup"
                    placeholder="طلاب المرحلة المتوسطة"
                    class="w-full"
                  />
                </div>
              </div>
            </div>

            <!-- فكرة المبادرة (الهدف العام) -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">فكرة المبادرة (الهدف العام):</h3>
              <textarea
                id="initiativeIdea"
                class="w-full"
                placeholder="تعزيز الوعي بالأمن السيبراني والمواطنة الرقمية لدى الطلاب، وتطوير مهاراتهم في التعامل الآمن مع التقنية الحديثة بما يتوافق مع رؤية ٢٠٣٠"
              ></textarea>
              <div class="mt-4">
                <label class="mb-2">اشرح الفكرة الرئيسية والهدف العام من المبادرة:</label>
                <textarea
                  id="initiativeExplanation"
                  class="w-full"
                  placeholder="اكتب شرحاً مفصلاً عن الفكرة الرئيسية والهدف العام من المبادرة"
                ></textarea>
              </div>
            </div>

            <!-- الأهداف -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">الأهداف:</h3>
              <div class="space-y-3">
                <div class="flex items-start gap-2">
                  <span class="mt-1">①</span>
                  <input
                    type="text"
                    id="goal1"
                    placeholder="تعزيز مفاهيم الأمن السيبراني لدى الطلاب"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">②</span>
                  <input
                    type="text"
                    id="goal2"
                    placeholder="تنمية مهارات المواطنة الرقمية والاستخدام الآمن للإنترنت"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">③</span>
                  <input
                    type="text"
                    id="goal3"
                    placeholder="توعية الطلاب بمخاطر الجرائم الإلكترونية وطرق الحماية منها"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">④</span>
                  <input
                    type="text"
                    id="goal4"
                    placeholder="تعزيز القيم الأخلاقية في التعاملات الرقمية"
                    class="w-full"
                  />
                </div>
              </div>
              <div class="mt-4">
                <label class="mb-2">حدد الأهداف التفصيلية للمبادرة:</label>
                <textarea
                  id="detailedGoals"
                  class="w-full"
                  placeholder="اكتب الأهداف التفصيلية للمبادرة"
                ></textarea>
              </div>
            </div>

            <!-- مكونات المبادرة (آلية التنفيذ) -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">مكونات المبادرة (آلية التنفيذ):</h3>
              <div class="space-y-3">
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="component1"
                    placeholder="ورش عمل تفاعلية عن الأمن السيبراني"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="component2"
                    placeholder="محاضرات توعوية من متخصصين في الأمن الوطني للأمن السيبراني"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="component3"
                    placeholder="مسابقات وتحديات في مجال الأمن الرقمي"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="component4"
                    placeholder="معرض تقني تفاعلي"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="component5"
                    placeholder="جلسات تدريبية عملية"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="component6"
                    placeholder="تنفيذ حملة توعوية على مواقع التواصل الاجتماعي"
                    class="w-full"
                  />
                </div>
              </div>
              <div class="mt-4">
                <label class="mb-2">اذكر العناصر والأنشطة المكونة للمبادرة:</label>
                <textarea
                  id="componentsExplanation"
                  class="w-full"
                  placeholder="اكتب شرحاً مفصلاً عن العناصر والأنشطة المكونة للمبادرة"
                ></textarea>
              </div>
            </div>

            <!-- الأنشطة -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">الأنشطة:</h3>
              <div class="space-y-3">
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="activity1"
                    placeholder="تطبيقات عملية لحماية الحسابات الشخصية"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="activity2"
                    placeholder="مسابقة لتصميم منصات توعوية"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="activity3"
                    placeholder="محاكاة لسيناريوهات الاختراق وطرق الحماية"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="activity4"
                    placeholder="إنتاج دليل إرشادي رقمي"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="activity5"
                    placeholder="تنفيذ حملة توعوية على مواقع التواصل الاجتماعي"
                    class="w-full"
                  />
                </div>
              </div>
              <div class="mt-4">
                <label class="mb-2">وصف الأنشطة المنفذة ضمن المبادرة:</label>
                <textarea
                  id="activitiesDescription"
                  class="w-full"
                  placeholder="اكتب وصفاً مفصلاً للأنشطة المنفذة ضمن المبادرة"
                ></textarea>
              </div>
            </div>

            <!-- مؤشرات النجاح (المخرجات المتوقعة) -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">مؤشرات النجاح (المخرجات المتوقعة):</h3>
              <div class="space-y-3">
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="successIndicator1"
                    placeholder="زيادة وعي الطلاب بقضايا الأمن السيبراني"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="successIndicator2"
                    placeholder="تحسين مستوى الممارسات الرقمية الآمنة"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="successIndicator3"
                    placeholder="عدد المشاركين في الأنشطة والفعاليات"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="successIndicator4"
                    placeholder="نتائج استبيانات قياس الأثر"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="successIndicator5"
                    placeholder="تفاعل أولياء الأمور مع المبادرة"
                    class="w-full"
                  />
                </div>
              </div>
              <div class="mt-4">
                <label class="mb-2">حدد مؤشرات قياس نجاح المبادرة:</label>
                <textarea
                  id="successIndicatorsExplanation"
                  class="w-full"
                  placeholder="اكتب شرحاً مفصلاً عن مؤشرات قياس نجاح المبادرة"
                ></textarea>
              </div>
            </div>

            <!-- المرفقات (وسائل التوثيق) -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">المرفقات (وسائل التوثيق):</h3>
              <div class="space-y-3">
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="attachment1"
                    placeholder="تقارير الأنشطة والفعاليات"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="attachment2"
                    placeholder="نماذج من أعمال الطلاب"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="attachment3"
                    placeholder="شهادات المشاركة"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="attachment4"
                    placeholder="توثيق مرئي للفعاليات"
                    class="w-full"
                  />
                </div>
                <div class="flex items-start gap-2">
                  <span class="mt-1">•</span>
                  <input
                    type="text"
                    id="attachment5"
                    placeholder="نتائج الاستبيانات والتقييم"
                    class="w-full"
                  />
                </div>
              </div>
              <div class="mt-4">
                <label class="mb-2">اذكر المرفقات والوثائق الداعمة:</label>
                <textarea
                  id="attachmentsExplanation"
                  class="w-full"
                  placeholder="اكتب شرحاً مفصلاً عن المرفقات والوثائق الداعمة للمبادرة"
                ></textarea>
              </div>
            </div>

            <!-- التوقيعات -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">التوقيعات:</h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                  <label class="mb-2">توقيع يمين:</label>
                  <input
                    type="text"
                    id="rightSignature"
                    placeholder="المعلم / اسم المعلم"
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">توقيع وسط:</label>
                  <input
                    type="text"
                    id="middleSignature"
                    placeholder=""
                    class="w-full"
                  />
                </div>
                <div>
                  <label class="mb-2">توقيع يسار:</label>
                  <input
                    type="text"
                    id="leftSignature"
                    placeholder=""
                    class="w-full"
                  />
                </div>
              </div>
            </div>

            <!-- تخصيص التصميم -->
            <div class="section-bg">
              <h3 class="text-lg font-bold mb-4">تخصيص التصميم:</h3>
              
              <!-- ستايل النموذج -->
              <div class="mb-4">
                <label class="mb-2">ستايل النموذج:</label>
                <div class="radio-group">
                  <div class="radio-option">
                    <input type="radio" id="style1" name="templateStyle" value="white" checked>
                    <label for="style1">أبيض (توفير حبر)</label>
                  </div>
                  <div class="radio-option">
                    <input type="radio" id="style2" name="templateStyle" value="original">
                    <label for="style2">الهوية البصرية الأصلية</label>
                  </div>
                  <div class="radio-option">
                    <input type="radio" id="style3" name="templateStyle" value="gradient">
                    <label for="style3">الهوية البصرية تدرج</label>
                  </div>
                </div>
              </div>
              
              <!-- شعار الجهة -->
              <div class="mb-4">
                <label class="mb-2">شعار الجهة:</label>
                <div class="file-upload">
                  <div class="file-upload-btn">
                    <span>شعار وزارة التعليم السعودية</span>
                    <span>No file chosen</span>
                  </div>
                  <input type="file" id="mainLogo" accept="image/*">
                </div>
                <p class="text-gray-600 text-sm mt-2">اختياري - سيظهر شعار وزارة التعليم افتراضياً</p>
              </div>
              
              <!-- الشعار الفرعي -->
              <div class="mb-4">
                <label class="mb-2">الشعار الفرعي:</label>
                <div class="file-upload">
                  <div class="file-upload-btn">
                    <span>الشعار الفرعي</span>
                    <span>No file chosen</span>
                  </div>
                  <input type="file" id="subLogo" accept="image/*">
                </div>
                <p class="text-gray-600 text-sm mt-2">اختياري - يظهر بجانب الشعار الرئيسي</p>
              </div>
              
              <!-- استخدام الأرقام العربية -->
              <div class="mb-4">
                <label class="mb-2">استخدام الأرقام العربية:</label>
                <div class="radio-group">
                  <div class="radio-option">
                    <input type="radio" id="arabicNumbersOn" name="arabicNumbers" value="on" checked>
                    <label for="arabicNumbersOn">مفعل</label>
                  </div>
                  <div class="radio-option">
                    <input type="radio" id="arabicNumbersOff" name="arabicNumbers" value="off">
                    <label for="arabicNumbersOff">معطل</label>
                  </div>
                </div>
                <p class="text-gray-600 text-sm mt-2">عند الإيقاف تظهر الأرقام كما أدخلت</p>
              </div>
              
              <!-- تصغير الشواهد -->
              <div class="mb-4">
                <label class="mb-2">تصغير الشواهد:</label>
                <div class="radio-group">
                  <div class="radio-option">
                    <input type="radio" id="smallCertificatesOn" name="smallCertificates" value="on">
                    <label for="smallCertificatesOn">مفعل</label>
                  </div>
                  <div class="radio-option">
                    <input type="radio" id="smallCertificatesOff" name="smallCertificates" value="off" checked>
                    <label for="smallCertificatesOff">معطل</label>
                  </div>
                </div>
                <p class="text-gray-600 text-sm mt-2">4 صور بالصفحة بدلاً من 2</p>
              </div>
              
              <!-- إضافة شواهد (صور) -->
              <div>
                <label class="mb-2">إضافة شواهد (صور):</label>
                <div class="file-upload">
                  <div class="file-upload-btn">
                    <span>إضافة شواهد</span>
                    <span>No file chosen</span>
                  </div>
                  <input type="file" id="certificates" accept="image/*" multiple>
                </div>
                <p class="text-gray-600 text-sm mt-2">أقصى حد للشواهد 10 شواهد</p>
              </div>
            </div>

            <!-- زر المعاينة -->
            <div class="flex justify-center mt-6 mb-8">
              <button
                onclick="previewTemplate()"
                class="bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-lg flex items-center gap-3 hover:bg-green-700 transition"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="2"
                  stroke="currentColor"
                  class="w-6 h-6"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                  />
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                  />
                </svg>
                معاينة المبادرة
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Popup للمعاينة -->
    <div id="previewModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="text-2xl font-bold text-gray-800">معاينة مبادرة الأمن السيبراني والمواطنة الرقمية</h2>
          <button class="modal-close" onclick="closePreviewModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div id="previewTemplateContent" class="preview-template">
            <!-- سيتم ملء المحتوى ديناميكياً -->
          </div>
          <div class="flex justify-center gap-4 mt-6">
            <button
              onclick="downloadImageFromModal()"
              class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition flex items-center gap-2"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"
                />
              </svg>
              تحميل كصورة
            </button>
            <button
              onclick="downloadPDFFromModal()"
              class="bg-red-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700 transition flex items-center gap-2"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"
                />
              </svg>
              تحميل PDF
            </button>
            <button
              onclick="closePreviewModal()"
              class="bg-gray-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-700 transition"
            >
              إغلاق
            </button>
          </div>
        </div>
      </div>
    </div>

<!-- FOOTER -->
    <footer class="mt-12 footer-ink border-t border-gray-100">
      <div
        class="max-w-6xl mx-auto px-6 py-8 flex flex-col md:flex-row md:items-center md:justify-between gap-6"
      >
        <!-- RIGHT COLUMN -->
        <div class="text-right md:flex-1">
          <img
            src="../assets/imgs/gsoor_logo.jpg"
            alt="logo"
            class="h-10 mx-auto md:mx-0"
          />
          <div
            class="flex justify-center md:justify-end gap-4 mt-3 text-gray-600"
          >
            <i class="fa-brands fa-youtube social-icon text-lg"></i>
            <i class="fa-brands fa-tiktok social-icon text-lg"></i>
            <i class="fa-brands fa-instagram social-icon text-lg"></i>
          </div>
        </div>

        <!-- CENTER COLUMN -->
        <div class="text-center md:flex-1">
          <h3 class="font-bold mb-2">تواصل معنا</h3>
          <div class="flex items-center justify-center gap-4 text-gray-600">
            <div class="flex items-center gap-2">
              <i class="fa-regular fa-envelope text-sm"></i>
              <span>البريد</span>
            </div>
            <div class="flex items-center gap-2">
              <i class="fa-solid fa-mobile-screen-button text-sm"></i>
              <span>واتس</span>
            </div>
          </div>
          <div class="mt-3 text-sm text-gray-500">موقّع لدى منصة الأعمال</div>
        </div>

        <!-- LEFT COLUMN -->
        <div class="text-left md:flex-1">
          <div class="text-sm text-gray-500">
            © 2025 متجر جسور الرقمي | جميع الحقوق محفوظة
          </div>
          <div
            class="mt-3 flex gap-2 items-center justify-center md:justify-start"
          >
            <span class="sr-only">Visa</span>
            <i class="fa-brands fa-cc-visa text-gray-600 text-lg"></i>
            <span class="sr-only">Mada</span>
            <i class="fa-solid fa-credit-card text-gray-600 text-lg"></i>
          </div>
        </div>
      </div>
    </footer>
    <script>
      // دالة مساعدة لتحويل الملف إلى base64
      function fileToBase64(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });
      }

      // دالة حفظ جميع البيانات في localStorage
      async function saveTemplateData() {
        try {
          // تحميل البيانات الموجودة أولاً للحفاظ على الملفات المحفوظة
          const existingData = JSON.parse(
            localStorage.getItem("cybersecurityInitiativeData") || "{}"
          );
          const data = { ...existingData };

          // جمع بيانات النص الأساسية
          data.reportTitle = document.getElementById("reportTitle").value;
          data.country = document.getElementById("country").value;
          data.ministry = document.getElementById("ministry").value;
          data.administration = document.getElementById("administration").value;
          data.school = document.getElementById("school").value;
          data.academicYear = document.getElementById("academicYear").value;
          data.semester = document.getElementById("semester").value;
          data.strategyName = document.getElementById("strategyName").value;
          data.targetCount = document.getElementById("targetCount").value;
          data.executionDate = document.getElementById("executionDate").value;
          data.initiativeLogo = document.getElementById("initiativeLogo").value;
          data.initiativeLocation = document.getElementById("initiativeLocation").value;
          data.targetGroup = document.getElementById("targetGroup").value;
          data.initiativeIdea = document.getElementById("initiativeIdea").value;
          data.initiativeExplanation = document.getElementById("initiativeExplanation").value;
          data.goal1 = document.getElementById("goal1").value;
          data.goal2 = document.getElementById("goal2").value;
          data.goal3 = document.getElementById("goal3").value;
          data.goal4 = document.getElementById("goal4").value;
          data.detailedGoals = document.getElementById("detailedGoals").value;
          data.component1 = document.getElementById("component1").value;
          data.component2 = document.getElementById("component2").value;
          data.component3 = document.getElementById("component3").value;
          data.component4 = document.getElementById("component4").value;
          data.component5 = document.getElementById("component5").value;
          data.component6 = document.getElementById("component6").value;
          data.componentsExplanation = document.getElementById("componentsExplanation").value;
          data.activity1 = document.getElementById("activity1").value;
          data.activity2 = document.getElementById("activity2").value;
          data.activity3 = document.getElementById("activity3").value;
          data.activity4 = document.getElementById("activity4").value;
          data.activity5 = document.getElementById("activity5").value;
          data.activitiesDescription = document.getElementById("activitiesDescription").value;
          data.successIndicator1 = document.getElementById("successIndicator1").value;
          data.successIndicator2 = document.getElementById("successIndicator2").value;
          data.successIndicator3 = document.getElementById("successIndicator3").value;
          data.successIndicator4 = document.getElementById("successIndicator4").value;
          data.successIndicator5 = document.getElementById("successIndicator5").value;
          data.successIndicatorsExplanation = document.getElementById("successIndicatorsExplanation").value;
          data.attachment1 = document.getElementById("attachment1").value;
          data.attachment2 = document.getElementById("attachment2").value;
          data.attachment3 = document.getElementById("attachment3").value;
          data.attachment4 = document.getElementById("attachment4").value;
          data.attachment5 = document.getElementById("attachment5").value;
          data.attachmentsExplanation = document.getElementById("attachmentsExplanation").value;
          data.rightSignature = document.getElementById("rightSignature").value;
          data.middleSignature = document.getElementById("middleSignature").value;
          data.leftSignature = document.getElementById("leftSignature").value;
          
          // جمع بيانات التصميم
          data.templateStyle = document.querySelector('input[name="templateStyle"]:checked').value;
          data.arabicNumbers = document.querySelector('input[name="arabicNumbers"]:checked').value;
          data.smallCertificates = document.querySelector('input[name="smallCertificates"]:checked').value;

          // جمع بيانات الشعارات
          const mainLogoFile = document.getElementById("mainLogo").files[0];
          if (mainLogoFile) {
            data.mainLogo = await fileToBase64(mainLogoFile);
          }
          
          const subLogoFile = document.getElementById("subLogo").files[0];
          if (subLogoFile) {
            data.subLogo = await fileToBase64(subLogoFile);
          }

          // حفظ البيانات في localStorage
          localStorage.setItem("cybersecurityInitiativeData", JSON.stringify(data));

          return data;
        } catch (error) {
          console.error("خطأ في حفظ البيانات:", error);
          alert("حدث خطأ في حفظ البيانات");
        }
      }

      // دالة المعاينة
      async function previewTemplate() {
        // إذا كانت البيانات صحيحة، حفظها وفتح المعاينة
        await saveTemplateData();
        generatePreviewContent();
        openPreviewModal();
      }

      // فتح الـ modal
      function openPreviewModal() {
        const modal = document.getElementById("previewModal");
        modal.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      // إغلاق الـ modal
      function closePreviewModal() {
        const modal = document.getElementById("previewModal");
        modal.classList.remove("active");
        document.body.style.overflow = "auto";
      }

      // توليد محتوى المعاينة
      function generatePreviewContent() {
        const data = JSON.parse(localStorage.getItem("cybersecurityInitiativeData") || "{}");
        const previewContainer = document.getElementById(
          "previewTemplateContent"
        );

        // إنشاء HTML للمعاينة
        let html = `
          <div class="space-y-6 text-right">
            <div class="text-center mb-6">
              <h2 class="text-3xl font-bold text-green-800 mb-4">${data.reportTitle || "مبادرة الأمن السيبراني والمواطنة الرقمية"}</h2>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">معلومات الهيدر</h3>
              <p class="text-lg text-gray-700">${data.country || ""}</p>
              <p class="text-lg text-gray-700">${data.ministry || ""}</p>
              <p class="text-lg text-gray-700">${data.administration || ""}</p>
              <p class="text-lg text-gray-700">${data.school || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">معلومات إضافية</h3>
              <p class="text-lg text-gray-700">العام الدراسي: ${data.academicYear || ""}</p>
              <p class="text-lg text-gray-700">الفصل الدراسي: ${data.semester || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">المعلومات الأساسية</h3>
              <p class="text-lg text-gray-700">اسم الاستراتيجية: ${data.strategyName || ""}</p>
              <p class="text-lg text-gray-700">عدد المستهدفين: ${data.targetCount || ""}</p>
              <p class="text-lg text-gray-700">تاريخ التنفيذ: ${data.executionDate || ""}</p>
              <p class="text-lg text-gray-700">شعار المبادرة: ${data.initiativeLogo || ""}</p>
              <p class="text-lg text-gray-700">مكان المبادرة: ${data.initiativeLocation || ""}</p>
              <p class="text-lg text-gray-700">الفئة المستهدفة: ${data.targetGroup || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">فكرة المبادرة (الهدف العام)</h3>
              <p class="text-lg text-gray-700">${data.initiativeIdea || ""}</p>
              <p class="mt-4 text-lg text-gray-700"><strong>شرح الفكرة الرئيسية:</strong> ${data.initiativeExplanation || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">الأهداف</h3>
              <ul class="numbered-list text-lg text-gray-700">
                <li>${data.goal1 || ""}</li>
                <li>${data.goal2 || ""}</li>
                <li>${data.goal3 || ""}</li>
                <li>${data.goal4 || ""}</li>
              </ul>
              <p class="mt-4 text-lg text-gray-700"><strong>الأهداف التفصيلية:</strong> ${data.detailedGoals || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">مكونات المبادرة (آلية التنفيذ)</h3>
              <ul class="list-disc pr-6 text-lg text-gray-700">
                <li>${data.component1 || ""}</li>
                <li>${data.component2 || ""}</li>
                <li>${data.component3 || ""}</li>
                <li>${data.component4 || ""}</li>
                <li>${data.component5 || ""}</li>
                <li>${data.component6 || ""}</li>
              </ul>
              <p class="mt-4 text-lg text-gray-700"><strong>شرح العناصر والأنشطة:</strong> ${data.componentsExplanation || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">الأنشطة</h3>
              <ul class="list-disc pr-6 text-lg text-gray-700">
                <li>${data.activity1 || ""}</li>
                <li>${data.activity2 || ""}</li>
                <li>${data.activity3 || ""}</li>
                <li>${data.activity4 || ""}</li>
                <li>${data.activity5 || ""}</li>
              </ul>
              <p class="mt-4 text-lg text-gray-700"><strong>وصف الأنشطة المنفذة:</strong> ${data.activitiesDescription || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">مؤشرات النجاح (المخرجات المتوقعة)</h3>
              <ul class="list-disc pr-6 text-lg text-gray-700">
                <li>${data.successIndicator1 || ""}</li>
                <li>${data.successIndicator2 || ""}</li>
                <li>${data.successIndicator3 || ""}</li>
                <li>${data.successIndicator4 || ""}</li>
                <li>${data.successIndicator5 || ""}</li>
              </ul>
              <p class="mt-4 text-lg text-gray-700"><strong>مؤشرات قياس النجاح:</strong> ${data.successIndicatorsExplanation || ""}</p>
            </div>

            <div class="mb-6">
              <h3 class="text-xl font-bold text-gray-800 mb-2">المرفقات (وسائل التوثيق)</h3>
              <ul class="list-disc pr-6 text-lg text-gray-700">
                <li>${data.attachment1 || ""}</li>
                <li>${data.attachment2 || ""}</li>
                <li>${data.attachment3 || ""}</li>
                <li>${data.attachment4 || ""}</li>
                <li>${data.attachment5 || ""}</li>
              </ul>
              <p class="mt-4 text-lg text-gray-700"><strong>الوثائق الداعمة:</strong> ${data.attachmentsExplanation || ""}</p>
            </div>

            <div class="mt-8 pt-4 border-t border-gray-300">
              <h3 class="text-xl font-bold text-gray-800 mb-2">التوقيعات</h3>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                  <p class="text-lg text-gray-700">${data.rightSignature || ""}</p>
                  <p class="text-sm text-gray-600 mt-2">توقيع يمين</p>
                </div>
                <div class="text-center">
                  <p class="text-lg text-gray-700">${data.middleSignature || ""}</p>
                  <p class="text-sm text-gray-600 mt-2">توقيع وسط</p>
                </div>
                <div class="text-center">
                  <p class="text-lg text-gray-700">${data.leftSignature || ""}</p>
                  <p class="text-sm text-gray-600 mt-2">توقيع يسار</p>
                </div>
              </div>
            </div>
          </div>
        `;

        previewContainer.innerHTML = html;
      }

      // تحميل الصورة من الـ modal
      function downloadImageFromModal() {
        const previewContent = document.getElementById(
          "previewTemplateContent"
        );
        html2canvas(previewContent, {
          backgroundColor: "#ffffff",
          scale: 2,
        }).then((canvas) => {
          const link = document.createElement("a");
          link.download = "cybersecurity-initiative.png";
          link.href = canvas.toDataURL();
          link.click();
        });
      }

      // تحميل PDF من الـ modal
      function downloadPDFFromModal() {
        const previewContent = document.getElementById(
          "previewTemplateContent"
        );
        html2canvas(previewContent, {
          backgroundColor: "#ffffff",
          scale: 2,
        }).then((canvas) => {
          const imgData = canvas.toDataURL("image/jpeg");
          const pdf = new jspdf.jsPDF("p", "mm", "a4");
          const imgWidth = 210;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          pdf.addImage(imgData, "JPEG", 0, 0, imgWidth, imgHeight);
          pdf.save("cybersecurity-initiative.pdf");
        });
      }
    </script>
  </body>
</html>
