<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <title>نموذج تنفيذ استراتيجية [بالشعار المناسب لك] | نماذج تعليمية</title>

    <style>
      body {
        font-family: "Helvetica", "Tajawal", sans-serif;
      }
      label {
        font-weight: 600;
        color: #136f3c;
        display: block;
        margin-bottom: 8px;
      }
      input[type="text"],
      input[type="date"],
      select,
      textarea {
        width: 100%;
        padding: 12px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background-color: #ffffff;
        font-size: 14px;
      }
      /* تحسين textarea الأهداف */
      textarea#objectives {
        min-height: 180px;
        line-height: 2;
        font-size: 15px;
        padding: 16px;
        resize: vertical;
      }
      /* تحسين textarea الإدارة والمنطقة والمكتب */
      textarea#administrationRegionOffice {
        min-height: 80px;
        line-height: 1.8;
        font-size: 14px;
        padding: 12px;
        resize: none;
        overflow: hidden;
        white-space: pre-wrap;
        word-wrap: break-word;
      }
      input[type="file"] {
        width: 100%;
        padding: 8px;
        border: 1px solid #d1d5db;
        border-radius: 6px;
        background-color: #ffffff;
      }
      .objectives-list {
        list-style: none;
        padding: 0;
        margin: 0;
      }
      .objectives-list li {
        padding: 8px 0;
        font-size: 14px;
      }
      /* Toggle Switch Styles */
      .toggle-switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 26px;
      }
      .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
      }
      .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: 0.4s;
        border-radius: 26px;
      }
      .toggle-slider:before {
        position: absolute;
        content: "";
        height: 20px;
        width: 20px;
        left: 3px;
        bottom: 3px;
        background-color: white;
        transition: 0.4s;
        border-radius: 50%;
      }
      .toggle-switch input:checked + .toggle-slider {
        background-color: #10b981;
      }
      .toggle-switch input:checked + .toggle-slider:before {
        transform: translateX(24px);
      }
      /* Section Background */
      .section-bg {
        background-color: #f3f4f6;
        padding: 16px;
        border-radius: 8px;
        margin-bottom: 16px;
      }
      /* Modal Styles */
      .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        overflow-y: auto;
        padding: 20px;
      }
      .modal-overlay.active {
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .modal-content {
        background: white;
        border-radius: 16px;
        max-width: 90%;
        width: 100%;
        max-width: 1200px;
        position: relative;
        margin: auto;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }
      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        border-bottom: 1px solid #e5e7eb;
      }
      .modal-body {
        padding: 20px;
        max-height: calc(100vh - 200px);
        overflow-y: auto;
      }
      .modal-close {
        background: none;
        border: none;
        font-size: 28px;
        cursor: pointer;
        color: #6b7280;
        padding: 0;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: all 0.2s;
      }
      .modal-close:hover {
        background-color: #f3f4f6;
        color: #111827;
      }
      .preview-template {
        background: white;
        padding: 40px;
        border: 2px solid #e5e7eb;
        border-radius: 12px;
      }
      /* Error Message Styles */
      .error-message {
        color: #dc2626;
        font-size: 14px;
        margin-top: 4px;
        display: none;
      }
      .error-message.show {
        display: block;
      }
      .field-error {
        border-color: #dc2626 !important;
        border-width: 2px !important;
      }
      .field-error:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
      }
      /* Navbar Styles */
      .navbar {
        background-color: #f3f4f6;
        padding: 12px 0;
        border-bottom: 1px solid #e5e7eb;
        top: 0;
        z-index: 100;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        width: 100%;
        margin: 0;
      }
      .navbar-container {
        width: 100%;
        margin: 0;
        padding: 0 16px;
      }
      .navbar-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }
      .navbar-title {
        font-size: 16px;
        font-weight: 600;
        color: #374151;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .navbar-icon {
        width: 20px;
        height: 20px;
        color: #3b82f6;
        flex-shrink: 0;
      }
      .navbar-menu {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 8px 12px;
        list-style: none;
        margin: 0;
        padding: 0;
      }
      .navbar-item {
        position: relative;
        display: flex;
        align-items: center;
        gap: 4px;
      }
      .navbar-link {
        color: #374151;
        text-decoration: none;
        font-size: 18px;
        padding: 4px 6px;
        display: flex;
        align-items: center;
        gap: 4px;
        transition: color 0.2s;
        white-space: nowrap;
      }
      .navbar-link:hover {
        color: #111827;
      }
      .dropdown-icon {
        width: 10px;
        height: 10px;
        color: #374151;
        margin-right: 4px;
      }
      .navbar-separator {
        color: #9ca3af;
        margin: 0 4px;
      }
      /* Mobile Menu Toggle */
      .mobile-menu-toggle {
        display: none;
        background: none;
        border: none;
        font-size: 24px;
        color: #374151;
        cursor: pointer;
        padding: 8px;
      }
      .mobile-menu {
        display: none;
        flex-direction: column;
        gap: 8px;
        padding: 12px 0;
        border-top: 1px solid #e5e7eb;
        margin-top: 8px;
      }
      .mobile-menu.active {
        display: flex;
      }
      /* Responsive Styles */
      @media (max-width: 1200px) {
        .navbar-menu {
          gap: 6px 12px;
        }
        .navbar-link {
          font-size: 13px;
          padding: 5px 6px;
        }
      }
      @media (max-width: 768px) {
        .navbar-container {
          padding: 0 12px;
        }
        .mobile-menu-toggle {
          display: block;
        }
        .navbar-menu {
          display: none;
        }
        .navbar-menu.mobile-active {
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
          padding: 12px 0;
        }
        .navbar-item {
          width: 100%;
        }
        .navbar-link {
          width: 100%;
          padding: 10px 8px;
        }
        .navbar-separator {
          display: none;
        }
      }
    </style>
  </head>

  <body class="bg-gray-100 py-10">
    <!-- Navbar -->
    <nav class="navbar">
      <div class="navbar-container">
        <div class="navbar-header">
          <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
            ☰
          </button>
        </div>
        <ul class="navbar-menu" id="navbarMenu">
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              <div class="w-[100px]">
                <img src="./assets/imgs/edu-forms-logo.svg" alt="" />
              </div>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              نماذج وتقارير توثيق
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              شواهد تقييم الأداء جاهزة
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              أدوات تحليل النتائج
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              الخطة الأسبوعية
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              تقرير إنجاز المعلم اليومي والأسبوعي
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              التقاويم الدراسية وتوزيع الأسابيع
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              شواهد التفاعل مع المجتمع المهني
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              شواهد أداء الواجبات الوظيفية
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              تقارير التواصل مع أولياء الأمور
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              خطط علاجية وإثرائية
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              استبيانات أنماط التعلم
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              شهادات شكر وتقدير
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              شهادات متنوعة
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              لوحات وبنرات
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
          <span class="navbar-separator">-</span>
          <li class="navbar-item">
            <a href="#" class="navbar-link">
              أدوات
              <svg
                class="dropdown-icon"
                fill="currentColor"
                viewBox="0 0 20 20"
              >
                <path
                  fill-rule="evenodd"
                  d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                  clip-rule="evenodd"
                />
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <div class="max-w-6xl mx-auto">
      <div
        class="max-w-4xl mx-auto border-4 rounded-2xl shadow-xl overflow-hidden mb-8 p-4"
        id="template"
      >
        <div class="bg-white rounded-xl p-6">
          <div
            class="w-[300px] h-[300px] flex mx-auto rounded-full overflow-hidden items-center justify-center shadow-md mb-8"
          >
            <img
              src="./assets//imgs//card3//global-strategic (1).webp"
              alt="img-title"
            />
          </div>
          <h1 class="text-5xl text-center">
            نموذج تنفيذ استراتيجية مختصر [بالشعار المناسب لك]
          </h1>
          <p class="text-gray-700 my-4 text-center text-xl">
            إنشاء وتخصيص نموذج تنفيذ استراتيجية مختصر [بالشعار المناسب لك] مع
            إمكانية تحرير وإضافة جميع البيانات الخاصة بك، بطريقة سهلة واحترافية
            توفر عليه الوقت والجهد ويتم حفظ الملف النهائي بتنسيق صورة أو ملف pdf
            لسهولة الطباعة بجودة عالية وإعادة الاستخدام في تقارير ونماذج أخرى.
          </p>
          <div class="p-6 space-y-6">
            <!-- قسم رفع الشعار -->
            <div>
              <label class="mb-2">ضع الشعار المناسب لك:</label>
              <input
                type="file"
                id="logoUpload"
                accept="image/*"
                class="w-full border p-3 rounded-md bg-gray-50"
              />
              <div id="logoError" class="error-message">هذا الحقل مطلوب</div>
              <div id="logoPreview" class="mt-2 hidden">
                <img
                  id="logoPreviewImg"
                  src=""
                  alt="Logo Preview"
                  class="max-h-24 object-contain"
                />
              </div>
            </div>

            <!-- قسم الإدارة, المنطقة, المكتب -->
            <div>
              <label class="mb-2">الإدارة, المنطقة, المكتب:</label>
              <div class="space-y-2">
                <textarea id="administrationRegionOffice">
الإدارة العامة للتعليم
بالمنطقة الشمالية
مكتب التعليم
                </textarea>
                <div id="administrationRegionOfficeError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
            </div>

            <!-- قسم اسم المؤسسة التعليمية, تاريخ التنفيذ, المادة -->
            <div class="grid grid-cols-3 gap-4">
              <div>
                <label class="mb-2">اسم المؤسسة التعليمية:</label>
                <input
                  type="text"
                  id="institutionName"
                  value="اسم المدرسة"
                  class="w-full"
                />
                <div id="institutionNameError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
              <div>
                <label class="mb-2">تاريخ التنفيذ:</label>
                <input
                  type="text"
                  id="executionDate"
                  value="١٤٤٦/١٢/١٢هـ"
                  class="w-full"
                />
                <div id="executionDateError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
              <div>
                <label class="mb-2">المادة:</label>
                <input type="text" id="subject" value="المادة" class="w-full" />
                <div id="subjectError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
            </div>

            <!-- قسم استراتيجية التعلم, عدد المستفيدين, المرحلة الدراسية -->
            <div class="grid grid-cols-3 gap-4">
              <div>
                <label class="mb-2">استراتيجية التعلم:</label>
                <input
                  type="text"
                  id="learningStrategy"
                  value="التعلم المبني على حل المشكلات"
                  class="w-full"
                />
                <div id="learningStrategyError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
              <div>
                <label class="mb-2">عدد المستفيدين:</label>
                <input
                  type="text"
                  id="beneficiariesCount"
                  value="٣٠ طالب"
                  class="w-full"
                />
                <div id="beneficiariesCountError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
              <div>
                <label class="mb-2">المرحلة الدراسية:</label>
                <input
                  type="text"
                  id="academicLevel"
                  value="الأول متوسط"
                  class="w-full"
                />
                <div id="academicLevelError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
            </div>

            <!-- قسم الفصل واسم الدرس -->
            <div class="grid grid-cols-2 gap-4">
              <div>
                <label class="mb-2">الفصل:</label>
                <input
                  type="text"
                  id="chapter"
                  value="جميع الفصول"
                  class="w-full"
                />
                <div id="chapterError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
              <div>
                <label class="mb-2">اسم الدرس:</label>
                <input
                  type="text"
                  id="lessonName"
                  value="المعادلات الخطية"
                  class="w-full"
                />
                <div id="lessonNameError" class="error-message">
                  هذا الحقل مطلوب
                </div>
              </div>
            </div>

            <!-- قسم الأهداف -->
            <div>
              <label class="mb-2">الأهداف:</label>
              <textarea id="objectives">
١. الهدف الأول.
٢. الهدف الثاني.
٣. الهدف الثالث.
٤. الهدف الرابع.
٥. الهدف الخامس.</textarea
              >
              <div id="objectivesError" class="error-message">
                هذا الحقل مطلوب
              </div>
            </div>

            <!-- قسم المعلومات الشخصية -->
            <div class="section-bg">
              <div class="space-y-4">
                <div>
                  <label class="mb-2">اسم المعلم:</label>
                  <textarea id="teacherName" class="row-2">
 اسم المعلم 
  الاسم
                  </textarea>
                  <div id="teacherNameError" class="error-message">
                    هذا الحقل مطلوب
                  </div>
                </div>
                <div>
                  <label class="mb-2">اسم آخر:</label>
                  <textarea id="anotherName">
  مدير المدرسة 
  الاسم
                  </textarea>
                  <div id="anotherNameError" class="error-message">
                    هذا الحقل مطلوب
                  </div>
                </div>
                <div>
                  <label class="mb-2">حساب تويتر:</label>
                  <input
                    type="text"
                    id="twitterAccount"
                    class="w-full bg-white py-3 text-base"
                  />
                </div>
              </div>
            </div>

            <!-- قسم الوسائل التعليمية المستخدمة -->
            <div class="section-bg">
              <label class="mb-4 block">الوسائل التعليمية المستخدمة:</label>
              <div class="grid grid-cols-5 gap-4">
                <!-- العمود الأيمن -->
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >جهاز عرض</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-projector" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >سبورة ذكية</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-smartboard" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <!-- العمود الأوسط -->
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >جهاز حاسب</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-computer" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >بطاقات تعليمية</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-cards" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <!-- العمود الأيسر (المجموعة العلوية) -->
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >صورة توضيحية</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-picture" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >أوراق عمل</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-worksheets" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <!-- العمود الأيسر (المجموعة السفلية) -->
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >أدوات رياضية</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-sports" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >عرض تقديمي</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-presentation" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
                <!-- العمود الأبعد يساراً -->
                <div class="space-y-4">
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >كتاب</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-book" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                  <div class="flex items-center justify-between">
                    <label class="text-sm font-normal text-gray-700 mb-0"
                      >سبورة تقليدية</label
                    >
                    <label class="toggle-switch">
                      <input type="checkbox" id="tool-whiteboard" />
                      <span class="toggle-slider"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>

            <!-- قسم صور الشواهد -->
            <div class="section-bg">
              <label class="mb-4 block">صور الشواهد:</label>
              <div class="space-y-4">
                <div>
                  <label class="mb-2">الشاهد الأول:</label>
                  <input
                    type="file"
                    id="evidence1"
                    accept="image/*"
                    class="w-full bg-white"
                  />
                  <div id="evidence1Error" class="error-message">
                    هذا الحقل مطلوب
                  </div>
                </div>
                <div>
                  <label class="mb-2">الشاهد الثاني:</label>
                  <input
                    type="file"
                    id="evidence2"
                    accept="image/*"
                    class="w-full bg-white"
                  />
                  <div id="evidence2Error" class="error-message">
                    هذا الحقل مطلوب
                  </div>
                </div>
              </div>
              <!-- زر المعاينة -->
              <div class="flex justify-center mt-6 mb-8">
                <button
                  onclick="previewTemplate()"
                  class="bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-lg flex items-center gap-3 hover:bg-green-700 transition"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke-width="2"
                    stroke="currentColor"
                    class="w-6 h-6"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"
                    />
                  </svg>
                  معاينة
                </button>
              </div>
              <div
                class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg p-6 mb-8"
              >
                <h2 class="text-lg font-bold text-gray-800 mb-4">
                  أكثر الروابط استخداماً
                </h2>
                <div class="grid grid-cols-2 gap-4">
                  <!-- الصف الأول -->
                  <button
                    class="border-2 border-blue-300 bg-white rounded-lg p-4 text-right hover:bg-[#3d7eb9] hover:text-white transition text-center font-bold text-[#3d7eb9]"
                  >
                    أفضل نموذج لتوثيق برنامج أو نشاط (المطور)
                  </button>
                  <button
                    class="border-2 border-blue-300 bg-white rounded-lg p-4 text-right hover:bg-[#3d7eb9] hover:text-white transition text-center font-bold text-[#3d7eb9]"
                  >
                    تقرير جاهز لليوم العالمي للفيزياء الطبية
                  </button>
                  <!-- الصف الثاني -->
                  <button
                    class="border-2 border-blue-300 bg-white rounded-lg p-4 text-right hover:bg-[#3d7eb9] hover:text-white transition text-center font-bold text-[#3d7eb9]"
                  >
                    نموذج تنفيذ استراتيجية مختصرة
                  </button>
                  <button
                    class="border-2 border-blue-300 bg-white rounded-lg p-4 text-right hover:bg-[#3d7eb9] hover:text-white transition text-center font-bold text-[#3d7eb9]"
                  >
                    خطط علاجية وإثرائية
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal Popup للمعاينة -->
    <div id="previewModal" class="modal-overlay">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="text-2xl font-bold text-gray-800">معاينة النموذج</h2>
          <button class="modal-close" onclick="closePreviewModal()">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div id="previewTemplateContent" class="preview-template">
            <!-- سيتم ملء المحتوى ديناميكياً -->
          </div>
          <div class="flex justify-center gap-4 mt-6">
            <button
              onclick="downloadImageFromModal()"
              class="bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition flex items-center gap-2"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"
                />
              </svg>
              تحميل كصورة
            </button>
            <button
              onclick="downloadPDFFromModal()"
              class="bg-red-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-red-700 transition flex items-center gap-2"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="2"
                stroke="currentColor"
                class="w-5 h-5"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"
                />
              </svg>
              تحميل PDF
            </button>
            <button
              onclick="closePreviewModal()"
              class="bg-gray-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-gray-700 transition"
            >
              إغلاق
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- قسم أكثر الروابط استخداماً -->

    <!-- قسم البيانات -->
    <div
      class="max-w-4xl mx-auto bg-white rounded-xl p-6 mb-8 border shadow-lg"
    >
      <div class="space-y-4">
        <div class="pb-4">
          <div class="flex justify-between flex-col items-center">
            <span class="text-2xl text-gray-700 font-medium"
              >عدد الخدمات المنفذة:</span
            >
            <span class="text-2xl font-medium text-gray-800">2184519</span>
          </div>
        </div>
      </div>
    </div>
    <div
      class="max-w-4xl mx-auto bg-white rounded-xl p-6 mb-8 border shadow-lg"
    >
      <div class="space-y-4">
        <div class="pb-4">
          <div class="flex justify-between flex-col items-center">
            <span class="text-gray-700 font-medium text-2xl"
              >عدد سجلات شواهد تقيم الأداء المنفذة</span
            >
            <span class="text-2xl font-medium text-gray-800">6321</span>
          </div>
        </div>
      </div>
    </div>

    <!-- الفوتر -->
    <footer class="mt-12 border-t border-gray-300 pt-6 pb-8">
      <div class="max-w-6xl mx-auto">
        <div
          class="flex flex-wrap justify-center items-center gap-4 text-gray-700 text-sm mb-4"
        >
          <a href="#" class="hover:text-green-600 transition">من نحن</a>
          <span class="text-gray-400">|</span>
          <a href="#" class="hover:text-green-600 transition">سياسة الخصوصية</a>
          <span class="text-gray-400">|</span>
          <a href="#" class="hover:text-green-600 transition"
            >اتفاقية الاستخدام</a
          >
          <span class="text-gray-400">|</span>
          <a
            href="#"
            class="hover:text-green-600 transition flex items-center gap-1"
          >
            تويتر
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="w-4 h-4"
            >
              <path
                d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"
              />
            </svg>
          </a>
          <span class="text-gray-400">|</span>
          <a href="#" class="hover:text-green-600 transition">اتصل بنا</a>
        </div>
        <div class="text-center text-gray-600 text-sm">
          Gsoor.com, Inc 2025 ©
        </div>
      </div>
    </footer>

    <script>
      // دالة تبديل القائمة على الموبايل
      function toggleMobileMenu() {
        const menu = document.getElementById("navbarMenu");
        menu.classList.toggle("mobile-active");
      }

      // دالة مساعدة لتحويل الملف إلى base64
      function fileToBase64(file) {
        return new Promise((resolve, reject) => {
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = reject;
          reader.readAsDataURL(file);
        });
      }

      // دالة حفظ جميع البيانات في localStorage
      async function saveTemplateData() {
        try {
          // تحميل البيانات الموجودة أولاً للحفاظ على الملفات المحفوظة
          const existingData = JSON.parse(
            localStorage.getItem("templateData3") || "{}"
          );
          const data = { ...existingData };

          // جمع بيانات النص الأساسية
          data.administrationRegionOffice = document.getElementById(
            "administrationRegionOffice"
          ).value;
          data.institutionName =
            document.getElementById("institutionName").value;
          data.executionDate = document.getElementById("executionDate").value;
          data.subject = document.getElementById("subject").value;
          data.learningStrategy =
            document.getElementById("learningStrategy").value;
          data.beneficiariesCount =
            document.getElementById("beneficiariesCount").value;
          data.academicLevel = document.getElementById("academicLevel").value;
          data.chapter = document.getElementById("chapter").value;
          data.lessonName = document.getElementById("lessonName").value;
          data.objectives = document.getElementById("objectives").value;
          data.teacherName = document.getElementById("teacherName").value;
          data.anotherName = document.getElementById("anotherName").value;
          data.twitterAccount = document.getElementById("twitterAccount").value;

          // جمع بيانات الشعار
          const logoFile = document.getElementById("logoUpload").files[0];
          if (logoFile) {
            data.logo = await fileToBase64(logoFile);
          }
          // إذا لم يكن هناك ملف جديد، نحتفظ بالشعار الموجود في existingData

          // جمع بيانات الوسائل التعليمية
          const tools = [
            "tool-projector",
            "tool-smartboard",
            "tool-computer",
            "tool-cards",
            "tool-picture",
            "tool-worksheets",
            "tool-sports",
            "tool-presentation",
            "tool-book",
            "tool-whiteboard",
          ];
          data.educationalTools = {};
          tools.forEach((toolId) => {
            const checkbox = document.getElementById(toolId);
            if (checkbox) {
              data.educationalTools[toolId] = checkbox.checked;
            }
          });

          // جمع بيانات صور الشواهد
          const evidence1File = document.getElementById("evidence1").files[0];
          if (evidence1File) {
            data.evidence1 = await fileToBase64(evidence1File);
          }
          // إذا لم يكن هناك ملف جديد، نحتفظ بالصورة الموجودة

          const evidence2File = document.getElementById("evidence2").files[0];
          if (evidence2File) {
            data.evidence2 = await fileToBase64(evidence2File);
          }
          // إذا لم يكن هناك ملف جديد، نحتفظ بالصورة الموجودة

          // حفظ البيانات في localStorage
          localStorage.setItem("templateData3", JSON.stringify(data));

          return data;
        } catch (error) {
          console.error("خطأ في حفظ البيانات:", error);
          alert("حدث خطأ في حفظ البيانات");
        }
      }

      // معالجة رفع الشعار
      document
        .getElementById("logoUpload")
        .addEventListener("change", function (e) {
          const file = e.target.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              const preview = document.getElementById("logoPreview");
              const img = document.getElementById("logoPreviewImg");
              img.src = e.target.result;
              preview.classList.remove("hidden");
            };
            reader.readAsDataURL(file);
          }
        });

      // دالة لتوسيع textarea تلقائياً حسب المحتوى
      function autoResizeTextarea(textarea) {
        textarea.style.height = "auto";
        textarea.style.height = textarea.scrollHeight + "px";
      }

      // إعداد التحقق من الحقول
      setupFieldValidation();

      // تحميل البيانات من localStorage إن وجدت
      const data = JSON.parse(localStorage.getItem("templateData3") || "{}");

      const adminTextarea = document.getElementById(
        "administrationRegionOffice"
      );
      if (data.administrationRegionOffice) {
        adminTextarea.value = data.administrationRegionOffice;
      }

      // تطبيق auto-resize عند التحميل
      autoResizeTextarea(adminTextarea);

      // تطبيق auto-resize عند الكتابة
      adminTextarea.addEventListener("input", function () {
        autoResizeTextarea(this);
      });
      if (data.institutionName) {
        document.getElementById("institutionName").value = data.institutionName;
      }
      if (data.executionDate) {
        document.getElementById("executionDate").value = data.executionDate;
      }
      if (data.subject) {
        document.getElementById("subject").value = data.subject;
      }
      if (data.learningStrategy) {
        document.getElementById("learningStrategy").value =
          data.learningStrategy;
      }
      if (data.beneficiariesCount) {
        document.getElementById("beneficiariesCount").value =
          data.beneficiariesCount;
      }
      if (data.academicLevel) {
        document.getElementById("academicLevel").value = data.academicLevel;
      }
      if (data.chapter) {
        document.getElementById("chapter").value = data.chapter;
      }
      if (data.lessonName) {
        document.getElementById("lessonName").value = data.lessonName;
      }
      if (data.logo) {
        const preview = document.getElementById("logoPreview");
        const img = document.getElementById("logoPreviewImg");
        img.src = data.logo;
        preview.classList.remove("hidden");
      }
      // تحميل بيانات الأهداف
      if (data.objectives) {
        document.getElementById("objectives").value = data.objectives;
      }

      // تحميل بيانات القسم الجديد
      if (data.teacherName) {
        document.getElementById("teacherName").value = data.teacherName;
      }
      if (data.anotherName) {
        document.getElementById("anotherName").value = data.anotherName;
      }
      if (data.twitterAccount) {
        document.getElementById("twitterAccount").value = data.twitterAccount;
      }

      // تحميل حالة التبديلات
      const tools = [
        "tool-projector",
        "tool-smartboard",
        "tool-computer",
        "tool-cards",
        "tool-picture",
        "tool-worksheets",
        "tool-sports",
        "tool-presentation",
        "tool-book",
        "tool-whiteboard",
      ];
      if (data.educationalTools) {
        tools.forEach((toolId) => {
          const checkbox = document.getElementById(toolId);
          if (checkbox && data.educationalTools[toolId]) {
            checkbox.checked = data.educationalTools[toolId];
          }
        });
      }

      // معالجة رفع صور الشواهد (الملفات لا يمكن استرجاعها من localStorage، فقط المعاينة)
      // البيانات المحفوظة في localStorage ستستخدم عند عرض المعاينة

      // دالة التحقق من صحة البيانات
      function validateForm() {
        let isValid = true;

        // إزالة رسائل الخطأ السابقة
        document.querySelectorAll(".error-message").forEach((error) => {
          error.classList.remove("show");
        });
        document.querySelectorAll(".field-error").forEach((field) => {
          field.classList.remove("field-error");
        });

        // التحقق من الشعار
        const logoFile = document.getElementById("logoUpload").files[0];
        const existingData = JSON.parse(
          localStorage.getItem("templateData3") || "{}"
        );
        if (!logoFile && !existingData.logo) {
          showError("logoUpload", "logoError");
          isValid = false;
        }

        // التحقق من الإدارة والمنطقة والمكتب
        const adminText = document
          .getElementById("administrationRegionOffice")
          .value.trim();
        if (!adminText) {
          showError(
            "administrationRegionOffice",
            "administrationRegionOfficeError"
          );
          isValid = false;
        }

        // التحقق من اسم المؤسسة التعليمية
        const institutionName = document
          .getElementById("institutionName")
          .value.trim();
        if (!institutionName) {
          showError("institutionName", "institutionNameError");
          isValid = false;
        }

        // التحقق من تاريخ التنفيذ
        const executionDate = document
          .getElementById("executionDate")
          .value.trim();
        if (!executionDate) {
          showError("executionDate", "executionDateError");
          isValid = false;
        }

        // التحقق من المادة
        const subject = document.getElementById("subject").value.trim();
        if (!subject) {
          showError("subject", "subjectError");
          isValid = false;
        }

        // التحقق من استراتيجية التعلم
        const learningStrategy = document
          .getElementById("learningStrategy")
          .value.trim();
        if (!learningStrategy) {
          showError("learningStrategy", "learningStrategyError");
          isValid = false;
        }

        // التحقق من عدد المستفيدين
        const beneficiariesCount = document
          .getElementById("beneficiariesCount")
          .value.trim();
        if (!beneficiariesCount) {
          showError("beneficiariesCount", "beneficiariesCountError");
          isValid = false;
        }

        // التحقق من المرحلة الدراسية
        const academicLevel = document
          .getElementById("academicLevel")
          .value.trim();
        if (!academicLevel) {
          showError("academicLevel", "academicLevelError");
          isValid = false;
        }

        // التحقق من الفصل
        const chapter = document.getElementById("chapter").value.trim();
        if (!chapter) {
          showError("chapter", "chapterError");
          isValid = false;
        }

        // التحقق من اسم الدرس
        const lessonName = document.getElementById("lessonName").value.trim();
        if (!lessonName) {
          showError("lessonName", "lessonNameError");
          isValid = false;
        }

        // التحقق من الأهداف
        const objectives = document.getElementById("objectives").value.trim();
        if (!objectives) {
          showError("objectives", "objectivesError");
          isValid = false;
        }

        // التحقق من اسم المعلم
        const teacherName = document.getElementById("teacherName").value.trim();
        if (!teacherName) {
          showError("teacherName", "teacherNameError");
          isValid = false;
        }

        // التحقق من اسم آخر
        const anotherName = document.getElementById("anotherName").value.trim();
        if (!anotherName) {
          showError("anotherName", "anotherNameError");
          isValid = false;
        }

        // التحقق من الشاهد الأول
        const evidence1File = document.getElementById("evidence1").files[0];
        if (!evidence1File && !existingData.evidence1) {
          showError("evidence1", "evidence1Error");
          isValid = false;
        }

        // التحقق من الشاهد الثاني
        const evidence2File = document.getElementById("evidence2").files[0];
        if (!evidence2File && !existingData.evidence2) {
          showError("evidence2", "evidence2Error");
          isValid = false;
        }

        return isValid;
      }

      // دالة لإظهار رسالة الخطأ
      function showError(fieldId, errorId) {
        const field = document.getElementById(fieldId);
        const error = document.getElementById(errorId);
        if (field) {
          field.classList.add("field-error");
        }
        if (error) {
          error.classList.add("show");
        }
      }

      // إزالة رسالة الخطأ عند الكتابة
      function setupFieldValidation() {
        const textFields = [
          "administrationRegionOffice",
          "institutionName",
          "executionDate",
          "subject",
          "learningStrategy",
          "beneficiariesCount",
          "academicLevel",
          "chapter",
          "lessonName",
          "objectives",
          "teacherName",
          "anotherName",
        ];

        const fileFields = ["logoUpload", "evidence1", "evidence2"];

        // معالجة حقول النص
        textFields.forEach((fieldId) => {
          const field = document.getElementById(fieldId);
          if (field) {
            field.addEventListener("input", function () {
              this.classList.remove("field-error");
              const errorId = fieldId + "Error";
              const error = document.getElementById(errorId);
              if (error) {
                error.classList.remove("show");
              }
            });
          }
        });

        // معالجة حقول الملفات
        fileFields.forEach((fieldId) => {
          const field = document.getElementById(fieldId);
          if (field) {
            field.addEventListener("change", function () {
              this.classList.remove("field-error");
              const errorId = fieldId + "Error";
              const error = document.getElementById(errorId);
              if (error) {
                error.classList.remove("show");
              }
            });
          }
        });
      }

      // دالة المعاينة - يمكن استدعاؤها من زر المعاينة
      async function previewTemplate() {
        // التحقق من صحة البيانات أولاً
        if (!validateForm()) {
          // التمرير إلى أول حقل به خطأ
          const firstError = document.querySelector(".field-error");
          if (firstError) {
            firstError.scrollIntoView({ behavior: "smooth", block: "center" });
          }
          return;
        }

        // إذا كانت البيانات صحيحة، حفظها وفتح المعاينة
        await saveTemplateData();
        generatePreviewContent();
        openPreviewModal();
      }

      // فتح الـ modal
      function openPreviewModal() {
        const modal = document.getElementById("previewModal");
        modal.classList.add("active");
        document.body.style.overflow = "hidden";
      }

      // إغلاق الـ modal
      function closePreviewModal() {
        const modal = document.getElementById("previewModal");
        modal.classList.remove("active");
        document.body.style.overflow = "auto";
      }

      // إغلاق الـ modal عند الضغط خارج المحتوى
      document
        .getElementById("previewModal")
        ?.addEventListener("click", function (e) {
          if (e.target === this) {
            closePreviewModal();
          }
        });

      // إغلاق الـ modal عند الضغط على ESC
      document.addEventListener("keydown", function (e) {
        if (e.key === "Escape") {
          closePreviewModal();
        }
      });

      // توليد محتوى المعاينة
      function generatePreviewContent() {
        const data = JSON.parse(localStorage.getItem("templateData3") || "{}");
        const previewContainer = document.getElementById(
          "previewTemplateContent"
        );

        // تحويل الأهداف إلى قائمة
        const objectives = data.objectives || "";
        const objectivesList = objectives
          .split("\n")
          .filter((line) => line.trim());

        // إنشاء HTML للمعاينة
        let html = `
          <div class="space-y-6">
            ${
              data.logo
                ? `<div class="flex justify-center mb-4"><img src="${data.logo}" alt="Logo" class="max-h-24 object-contain" /></div>`
                : ""
            }
            
            <div class="text-center mb-6">
              <div class="text-sm text-gray-700 mb-2 whitespace-pre-line">${
                data.administrationRegionOffice || ""
              }</div>
            </div>

            <div class="grid grid-cols-3 gap-4 mb-6">
              <div>
                <p class="font-bold text-green-800 mb-1">اسم المؤسسة التعليمية:</p>
                <p class="text-gray-700">${data.institutionName || ""}</p>
              </div>
              <div>
                <p class="font-bold text-green-800 mb-1">تاريخ التنفيذ:</p>
                <p class="text-gray-700">${data.executionDate || ""}</p>
              </div>
              <div>
                <p class="font-bold text-green-800 mb-1">المادة:</p>
                <p class="text-gray-700">${data.subject || ""}</p>
              </div>
            </div>

            <div class="grid grid-cols-3 gap-4 mb-6">
              <div>
                <p class="font-bold text-green-800 mb-1">استراتيجية التعلم:</p>
                <p class="text-gray-700">${data.learningStrategy || ""}</p>
              </div>
              <div>
                <p class="font-bold text-green-800 mb-1">عدد المستفيدين:</p>
                <p class="text-gray-700">${data.beneficiariesCount || ""}</p>
              </div>
              <div>
                <p class="font-bold text-green-800 mb-1">المرحلة الدراسية:</p>
                <p class="text-gray-700">${data.academicLevel || ""}</p>
              </div>
            </div>

            <div class="grid grid-cols-2 gap-4 mb-6">
              <div>
                <p class="font-bold text-green-800 mb-1">الفصل:</p>
                <p class="text-gray-700">${data.chapter || ""}</p>
              </div>
              <div>
                <p class="font-bold text-green-800 mb-1">اسم الدرس:</p>
                <p class="text-gray-700">${data.lessonName || ""}</p>
              </div>
            </div>

            <div class="mb-6">
              <p class="font-bold text-green-800 mb-2">الأهداف:</p>
              <div class="border rounded-md p-4 bg-gray-50">
                <ol class="list-decimal list-inside space-y-2 text-gray-700">
                  ${objectivesList
                    .map((obj) => `<li>${obj.trim()}</li>`)
                    .join("")}
                </ol>
              </div>
            </div>

            <div class="bg-gray-100 p-4 rounded-lg mb-6">
              <div class="space-y-3">
                <div>
                  <p class="font-bold text-green-800 mb-1">اسم المعلم:</p>
                  <p class="text-gray-700 whitespace-pre-line">${
                    data.teacherName || ""
                  }</p>
                </div>
                <div>
                  <p class="font-bold text-green-800 mb-1">اسم آخر:</p>
                  <p class="text-gray-700 whitespace-pre-line">${
                    data.anotherName || ""
                  }</p>
                </div>
                ${
                  data.twitterAccount
                    ? `
                <div>
                  <p class="font-bold text-green-800 mb-1">حساب تويتر:</p>
                  <p class="text-gray-700">${data.twitterAccount}</p>
                </div>
                `
                    : ""
                }
              </div>
            </div>

            <div class="bg-gray-100 p-4 rounded-lg mb-6">
              <p class="font-bold text-green-800 mb-3">الوسائل التعليمية المستخدمة:</p>
              <div class="grid grid-cols-5 gap-4">
                ${generateToolsList(data.educationalTools || {})}
              </div>
            </div>

            <div class="bg-gray-100 p-4 rounded-lg">
              <p class="font-bold text-green-800 mb-3">صور الشواهد:</p>
              <div class="grid grid-cols-2 gap-4">
                ${
                  data.evidence1
                    ? `<div><p class="font-bold text-sm mb-2">الشاهد الأول:</p><img src="${data.evidence1}" alt="Evidence 1" class="w-full h-48 object-contain border rounded" /></div>`
                    : ""
                }
                ${
                  data.evidence2
                    ? `<div><p class="font-bold text-sm mb-2">الشاهد الثاني:</p><img src="${data.evidence2}" alt="Evidence 2" class="w-full h-48 object-contain border rounded" /></div>`
                    : ""
                }
              </div>
            </div>
          </div>
        `;

        previewContainer.innerHTML = html;
      }

      // توليد قائمة الوسائل التعليمية
      function generateToolsList(tools) {
        const toolsMap = {
          "tool-projector": "جهاز عرض",
          "tool-smartboard": "سبورة ذكية",
          "tool-computer": "جهاز حاسب",
          "tool-cards": "بطاقات تعليمية",
          "tool-picture": "صورة توضيحية",
          "tool-worksheets": "أوراق عمل",
          "tool-sports": "أدوات رياضية",
          "tool-presentation": "عرض تقديمي",
          "tool-book": "كتاب",
          "tool-whiteboard": "سبورة تقليدية",
        };

        // جمع الوسائل المحددة فقط
        const selectedTools = [];
        Object.entries(toolsMap).forEach(([key, label]) => {
          if (tools[key]) {
            selectedTools.push(label);
          }
        });

        if (selectedTools.length === 0) {
          return '<div class="col-span-5 text-gray-500 text-center py-4">لم يتم تحديد وسائل تعليمية</div>';
        }

        // توزيع الوسائل على 5 أعمدة
        const toolsPerColumn = Math.ceil(selectedTools.length / 5);
        let html = "";

        for (let i = 0; i < 5; i++) {
          html += '<div class="space-y-2">';
          for (let j = 0; j < toolsPerColumn; j++) {
            const index = i * toolsPerColumn + j;
            if (index < selectedTools.length) {
              html += `<div class="flex items-center gap-2">
                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                <span class="text-sm text-gray-700">${selectedTools[index]}</span>
              </div>`;
            }
          }
          html += "</div>";
        }

        return html;
      }

      // تحميل الصورة من الـ modal
      function downloadImageFromModal() {
        const previewContent = document.getElementById(
          "previewTemplateContent"
        );
        html2canvas(previewContent, {
          backgroundColor: "#ffffff",
          scale: 2,
        }).then((canvas) => {
          const link = document.createElement("a");
          link.download = "report.png";
          link.href = canvas.toDataURL();
          link.click();
        });
      }

      // تحميل PDF من الـ modal
      function downloadPDFFromModal() {
        const previewContent = document.getElementById(
          "previewTemplateContent"
        );
        html2canvas(previewContent, {
          backgroundColor: "#ffffff",
          scale: 2,
        }).then((canvas) => {
          const imgData = canvas.toDataURL("image/jpeg");
          const pdf = new jspdf.jsPDF("p", "mm", "a4");
          const imgWidth = 210;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          pdf.addImage(imgData, "JPEG", 0, 0, imgWidth, imgHeight);
          pdf.save("report.pdf");
        });
      }

      function goBack() {
        window.history.back();
      }

      function downloadImage() {
        html2canvas(document.getElementById("template"), {
          backgroundColor: "#ffffff",
          scale: 2,
        }).then((canvas) => {
          const link = document.createElement("a");
          link.download = "report.png";
          link.href = canvas.toDataURL();
          link.click();
        });
      }

      function downloadPDF() {
        html2canvas(document.getElementById("template"), {
          backgroundColor: "#ffffff",
          scale: 2,
        }).then((canvas) => {
          const imgData = canvas.toDataURL("image/jpeg");
          const pdf = new jspdf.jsPDF("p", "mm", "a4");
          const imgWidth = 210;
          const imgHeight = (canvas.height * imgWidth) / canvas.width;
          pdf.addImage(imgData, "JPEG", 0, 0, imgWidth, imgHeight);
          pdf.save("report.pdf");
        });
      }
    </script>
  </body>
</html>
